# Minimal Portage config for CI/docker runner.
# Keep this file small and focused on reproducibility.

# Use persistent Docker volumes for caches.
DISTDIR="/var/cache/distfiles"
PKGDIR="/var/cache/binpkgs"

# Produce binpkgs to speed repeated runs.
# Disable namespace-based sandboxes: common Docker/seccomp configs block
# unshare(2) with EPERM, which otherwise results in noisy pre-merge warnings.
FEATURES="${FEATURES} buildpkg -ipc-sandbox -network-sandbox -pid-sandbox"

# Use all available CPU cores inside the container (respects cpuset/cgroup
# limits on modern coreutils). Fall back safely if detection fails.
MAKEOPTS="-j30"

# Avoid interactive prompts in non-interactive CI.
EMERGE_DEFAULT_OPTS="--quiet-build=y"
